var cdn_url = "https://cdn.jsdelivr.net/gh/jtcymc/ymc_typora@latest/dist";const oss_js_path=`${cdn_url}/js`,live2d_url_prefix=`${oss_js_path}/live2d/lib`,oss_css_path=`${cdn_url}/css`,formMenuData=JSON.parse(localStorage.getItem("configMenu"));function loadBaseDeps(){return Promise.all([loadExternalResource(`${cdn_url}/layui-v2.8.4/layui/css`,"typora-layui","css",!1,!0),loadExternalResource(`${cdn_url}/layui-v2.8.4/layui`,"layui","js",!1,!1),loadExternalResource(`${oss_js_path}/core`,"EventEmitter","js",!1,!0,!0).then(()=>{window.ymcEventBus=new EventEmitter}),loadExternalResource(`${oss_css_path}/float`,"float-btn","css",!1,!0),loadExternalResource("https://unpkg.com/theme-shokax-anime@0.0.4","anime.shokax","js",!1),loadExternalResource("https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css","all","css",!1,!0),loadExternalResource(`${oss_css_path}`,"animate.min","css",!0,!1),loadExternalResource(`${oss_css_path}/float`,"float-btn","css",!0,!0),loadExternalResource(`${oss_js_path}/ui`,"shaw-base-fun","js",!1,!0,!0),]).then(()=>{loadExternalResource(`${oss_js_path}/ui`,"shaw-float-btn","js",!1,!0).then(()=>{new FloatBtnMenu}),layui.use(["form","laydate","util"],function(){})})}function loadLive2D(){Promise.all([loadExternalResource(`${live2d_url_prefix}`,"live2dcubismcore","js",!1,!0,!1),loadExternalResource(`${live2d_url_prefix}`,"pixi","js",!1,!0,!1),]).then(()=>{Promise.all([loadExternalResource(`${live2d_url_prefix}`,"pio_sdk4","js",!1,!0,!0),loadExternalResource(`${live2d_url_prefix}`,"cubism4","js",!1,!0,!0),loadExternalResource(`${live2d_url_prefix}`,"pio","js",!1,!0,!0),loadExternalResource(`${live2d_url_prefix}`,"pio","css",!1,!0,!1),loadExternalResource(`${live2d_url_prefix}`,"load","js",!1,!0,!0),]).then(()=>{window.addEventListener("load",function(){loadDianaModel()})})})}function loadCSSComponent(){loadExternalResource(`${oss_js_path}/ui`,"shaw-css-component","js",!1,!0,!0).then(()=>{formMenuData&&Object.keys(formMenuData).length>0&&(1==formMenuData.mouseHeart&&mouseHeartInit(),1==formMenuData.mouseTail&&fairyDustCursor(),1==formMenuData.firework&&firework(),window?.ymcEventBus.on("onMouseHeart",mouseHeartInit),window?.ymcEventBus.on("onMouseTail",fairyDustCursor),window?.ymcEventBus.on("onFirework",firework))})}function loadToolComponent(){loadExternalResource(`${oss_js_path}/ui`,"shaw-web-tools","js",!1,!0,!0),loadExternalResource(`${oss_js_path}/ui`,"shaw-typora-expend","js",!1,!0,!0)}function loadExternalResource(e,s,o,a=!1,n=!0,t=!1){return new Promise((l,r)=>{let u,i=n?`${e}/${s}.min`:`${e}/${s}`;i=t?`${i}.obfuscated.${o}`:`${i}.${o}`,"css"===o?((u=document.createElement("link")).rel="stylesheet",u.href=a?i+"?v={{"+Math.random().toString(36).substring(7)+" }}":i):"js"===o&&((u=document.createElement("script")).src=a?i+"?v={{"+Math.random().toString(36).substring(7)+" }}":i),u&&(u.onload=()=>l(i),u.onerror=()=>r(i),document.head.appendChild(u))})}window.addEventListener("DOMContentLoaded",function(){loadBaseDeps().then(()=>{loadLive2D(),loadCSSComponent(),loadToolComponent()})});